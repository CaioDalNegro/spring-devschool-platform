select * from aluno;

select * from professor;

select * from curso;

select * from turma;

select * from turma_aluno;

select * from atividade;

select * from turmaAtividade;

select * from aulas;





create table aluno(
	id_aluno uuid PRIMARY KEY,
    email VARCHAR(100) UNIQUE NOT NULL,
    nome VARCHAR(100) NOT NULL,
	senha VARCHAR(100) NOT NULL unique
)


create table professor(
	id_professor uuid PRIMARY KEY,
    email VARCHAR(100) UNIQUE NOT NULL,
    nome VARCHAR(100) NOT NULL,
	senha VARCHAR(100) NOT NULL unique
)


create table curso(
	id_curso uuid primary key,
	nome varchar(100) not null,
	descricao varchar(100),
	id_professor uuid not null references professor(id_professor)
);


CREATE TABLE turma (
    id_turma UUID PRIMARY KEY,
    id_curso UUID NOT NULL,
    nome_turma VARCHAR(100) NOT NULL,
    qtd_alunos INT DEFAULT 0,
    qtd_desafios INT DEFAULT 0,
    FOREIGN KEY (id_curso) REFERENCES curso(id_curso)
        ON DELETE CASCADE
);


CREATE TABLE turma_aluno (
    id_turma UUID NOT NULL REFERENCES turma(id_turma) ON DELETE CASCADE,
    id_aluno UUID NOT NULL REFERENCES aluno(id_aluno) ON DELETE CASCADE,
    data_matricula date,
    PRIMARY KEY (id_turma, id_aluno)
);

create table atividade (
	id_atividade UUID not null primary key,
	id_turma UUID NOT NULL REFERENCES turma(id_turma) ON DELETE CASCADE,
	titulo varchar(100) not null,
	descricao varchar(100) not null,
	data_entrega date not null,
    data_publicacao date not null,
    caminho varchar(255)
);

create table turmaAtividade(
	id_turma UUID NOT NULL REFERENCES turma(id_turma) ON DELETE CASCADE,
    id_atividade UUID NOT NULL REFERENCES atividade(id_atividade) ON DELETE CASCADE,
    PRIMARY KEY (id_turma, id_atividade)
);




create table aulas(
	id_aula uuid unique not null primary key,
	id_turma uuid not null references turma(id_turma),
	titulo varchar(255) not null,
	descricao varchar(255),
	data_publicacao date not null,
	caminho varchar(255)
);
--- drop table ;
